# gh repo - リポジトリ操作コマンド

`gh repo` コマンドでリポジトリの作成、クローン、フォーク、表示などを行います。

---

## 目次

- [gh repo clone - クローン](#gh-repo-clone---クローン)
- [gh repo create - 作成](#gh-repo-create---作成)
- [gh repo fork - フォーク](#gh-repo-fork---フォーク)
- [gh repo view - 表示](#gh-repo-view---表示)
- [gh repo list - 一覧](#gh-repo-list---一覧)
- [gh repo delete - 削除](#gh-repo-delete---削除)
- [gh repo edit - 編集](#gh-repo-edit---編集)
- [gh repo rename - 名前変更](#gh-repo-rename---名前変更)
- [gh repo sync - 同期](#gh-repo-sync---同期)
- [gh repo archive - アーカイブ](#gh-repo-archive---アーカイブ)

---

## gh repo clone - クローン

リポジトリをローカルにクローンします。

### 基本構文

```bash
gh repo clone <repository> [<directory>]
```

### 使用例

```bash
# OWNER/REPO 形式でクローン
gh repo clone facebook/react

# 指定ディレクトリにクローン
gh repo clone facebook/react my-react

# URL でクローン
gh repo clone https://github.com/facebook/react

# 自分のリポジトリをクローン
gh repo clone my-repo

# Git の追加オプションを渡す
gh repo clone facebook/react -- --depth=1 --single-branch
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `--` | 以降のオプションを git clone に渡す |

### git clone との違い

```bash
# git clone（URL が必要）
git clone https://github.com/owner/repo.git

# gh repo clone（OWNER/REPO 形式でOK）
gh repo clone owner/repo
```

---

## gh repo create - 作成

新しいリポジトリを作成します。

### 基本構文

```bash
gh repo create [<name>] [flags]
```

### 使用例

```bash
# 対話形式で作成
gh repo create

# パブリックリポジトリを作成
gh repo create my-new-repo --public

# プライベートリポジトリを作成
gh repo create my-private-repo --private

# 説明付きで作成
gh repo create my-repo --description "これは私のプロジェクトです"

# README 付きで作成
gh repo create my-repo --public --add-readme

# .gitignore 付きで作成
gh repo create my-repo --public --gitignore Python

# ライセンス付きで作成
gh repo create my-repo --public --license MIT

# 作成後にクローン
gh repo create my-repo --public --clone

# 既存のローカルリポジトリをプッシュ
cd existing-project
gh repo create --source=. --public --push

# Organization にリポジトリを作成
gh repo create my-org/new-repo --public
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `--public` | パブリックリポジトリを作成 |
| `--private` | プライベートリポジトリを作成 |
| `--internal` | 内部リポジトリを作成（Enterprise のみ） |
| `-d, --description <string>` | 説明を設定 |
| `--add-readme` | README.md を追加 |
| `--gitignore <string>` | .gitignore テンプレートを指定 |
| `--license <string>` | ライセンスを指定 |
| `-c, --clone` | 作成後にクローン |
| `-s, --source <path>` | ローカルリポジトリのパス |
| `--push` | ローカルコミットをプッシュ |
| `--template <repo>` | テンプレートリポジトリを指定 |
| `--disable-issues` | Issue を無効化 |
| `--disable-wiki` | Wiki を無効化 |

### ユースケース

#### 新規プロジェクトの開始

```bash
# リポジトリ作成からクローンまで一発
gh repo create my-project \
  --public \
  --description "My awesome project" \
  --add-readme \
  --gitignore Node \
  --license MIT \
  --clone

cd my-project
```

#### 既存プロジェクトを GitHub にアップロード

```bash
cd my-existing-project
git init
git add .
git commit -m "Initial commit"
gh repo create --source=. --public --push
```

---

## gh repo fork - フォーク

リポジトリをフォークします。

### 基本構文

```bash
gh repo fork [<repository>] [flags]
```

### 使用例

```bash
# 現在のディレクトリのリポジトリをフォーク
gh repo fork

# 指定リポジトリをフォーク
gh repo fork owner/repo

# フォーク後にクローン
gh repo fork owner/repo --clone

# リモート追加をスキップ
gh repo fork --remote=false

# クローンをスキップ
gh repo fork owner/repo --clone=false

# 特定の Organization にフォーク
gh repo fork owner/repo --org my-organization

# フォーク名を指定
gh repo fork owner/repo --fork-name my-fork
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `--clone` | フォーク後にクローン |
| `--remote` | リモートを追加するか |
| `--remote-name <string>` | リモート名（デフォルト: origin） |
| `--org <string>` | フォーク先 Organization |
| `--fork-name <string>` | フォークの名前 |

### フォークワークフロー

```bash
# 1. フォーク＆クローン
gh repo fork owner/repo --clone
cd repo

# 2. ブランチ作成
git checkout -b my-feature

# 3. 変更を加えてコミット
git add .
git commit -m "Add new feature"

# 4. プッシュ
git push origin my-feature

# 5. PR 作成
gh pr create
```

---

## gh repo view - 表示

リポジトリの詳細情報を表示します。

### 基本構文

```bash
gh repo view [<repository>] [flags]
```

### 使用例

```bash
# 現在のリポジトリを表示
gh repo view

# 指定リポジトリを表示
gh repo view owner/repo

# ブラウザで開く
gh repo view --web
gh repo view owner/repo --web

# JSON 形式で出力
gh repo view --json name,description,url

# README を表示しない
gh repo view --no-readme

# 特定のブランチを表示
gh repo view --branch develop
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `-w, --web` | ブラウザで開く |
| `-b, --branch <string>` | ブランチを指定 |
| `--json <fields>` | JSON 形式で出力 |
| `-q, --jq <expression>` | jq 式でフィルタ |
| `--template <string>` | Go テンプレートで出力 |

### JSON フィールド例

```bash
# 基本情報
gh repo view --json name,description,url,visibility

# スター数とフォーク数
gh repo view --json stargazerCount,forkCount

# 詳細情報
gh repo view --json name,description,defaultBranchRef,primaryLanguage

# jq でフィルタ
gh repo view --json stargazerCount -q '.stargazerCount'
```

---

## gh repo list - 一覧

リポジトリの一覧を表示します。

### 基本構文

```bash
gh repo list [<owner>] [flags]
```

### 使用例

```bash
# 自分のリポジトリ一覧
gh repo list

# 特定ユーザーのリポジトリ一覧
gh repo list username

# Organization のリポジトリ一覧
gh repo list my-org

# 表示件数を指定
gh repo list --limit 100

# パブリックのみ
gh repo list --visibility public

# プライベートのみ
gh repo list --visibility private

# アーカイブされていないもののみ
gh repo list --no-archived

# フォークを除外
gh repo list --source

# 言語でフィルタ
gh repo list --language python

# JSON 形式で出力
gh repo list --json name,url,isPrivate

# テーブル形式（デフォルト）
gh repo list
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `-L, --limit <int>` | 表示件数（デフォルト: 30） |
| `--visibility <string>` | public/private/internal |
| `--fork` | フォークのみ表示 |
| `--source` | フォーク以外を表示 |
| `--no-archived` | アーカイブ済みを除外 |
| `--archived` | アーカイブ済みのみ表示 |
| `-l, --language <string>` | 言語でフィルタ |
| `--topic <strings>` | トピックでフィルタ |
| `--json <fields>` | JSON 形式で出力 |
| `-q, --jq <expression>` | jq 式でフィルタ |

### 実用例

```bash
# スター順で表示
gh repo list --json name,stargazerCount --jq 'sort_by(.stargazerCount) | reverse | .[:10]'

# 特定言語のリポジトリを取得
gh repo list --language typescript --json name,url

# 最近更新されたリポジトリ
gh repo list --json name,updatedAt --jq 'sort_by(.updatedAt) | reverse'
```

---

## gh repo delete - 削除

リポジトリを削除します。

### 基本構文

```bash
gh repo delete [<repository>] [flags]
```

### 使用例

```bash
# 対話形式で削除
gh repo delete

# 指定リポジトリを削除
gh repo delete owner/repo

# 確認をスキップ（危険！）
gh repo delete owner/repo --yes
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `--yes` | 確認をスキップ |

> ⚠️ **注意**: 削除は取り消せません。`--yes` オプションは慎重に使用してください。

---

## gh repo edit - 編集

リポジトリの設定を編集します。

### 基本構文

```bash
gh repo edit [<repository>] [flags]
```

### 使用例

```bash
# 説明を変更
gh repo edit --description "新しい説明"

# ホームページを設定
gh repo edit --homepage "https://example.com"

# デフォルトブランチを変更
gh repo edit --default-branch main

# 可視性を変更
gh repo edit --visibility private

# Issue を有効化/無効化
gh repo edit --enable-issues=false

# Wiki を有効化/無効化
gh repo edit --enable-wiki=false

# トピックを追加
gh repo edit --add-topic javascript,react

# トピックを削除
gh repo edit --remove-topic old-topic

# 複数設定を同時に変更
gh repo edit \
  --description "Updated description" \
  --homepage "https://new-site.com" \
  --enable-issues \
  --add-topic typescript
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `-d, --description <string>` | 説明を設定 |
| `-h, --homepage <URL>` | ホームページを設定 |
| `--default-branch <name>` | デフォルトブランチを設定 |
| `--visibility <string>` | 可視性を変更 |
| `--enable-issues` | Issue を有効化 |
| `--enable-wiki` | Wiki を有効化 |
| `--enable-projects` | Projects を有効化 |
| `--add-topic <strings>` | トピックを追加 |
| `--remove-topic <strings>` | トピックを削除 |

---

## gh repo rename - 名前変更

リポジトリの名前を変更します。

### 基本構文

```bash
gh repo rename [<new-name>] [flags]
```

### 使用例

```bash
# 対話形式で名前変更
gh repo rename

# 新しい名前を指定
gh repo rename new-repo-name

# 確認をスキップ
gh repo rename new-name --yes
```

---

## gh repo sync - 同期

フォークを上流リポジトリと同期します。

### 基本構文

```bash
gh repo sync [<destination-repository>] [flags]
```

### 使用例

```bash
# 現在のフォークを上流と同期
gh repo sync

# ブランチを指定
gh repo sync --branch main

# 強制同期（ローカル変更を上書き）
gh repo sync --force

# ソースリポジトリを指定
gh repo sync --source owner/repo
```

### 主なオプション

| オプション | 説明 |
|-----------|------|
| `-b, --branch <string>` | 同期するブランチ |
| `--force` | 強制同期 |
| `-s, --source <string>` | ソースリポジトリ |

---

## gh repo archive - アーカイブ

リポジトリをアーカイブします。

### 基本構文

```bash
gh repo archive [<repository>] [flags]
```

### 使用例

```bash
# 現在のリポジトリをアーカイブ
gh repo archive

# 指定リポジトリをアーカイブ
gh repo archive owner/repo

# 確認をスキップ
gh repo archive --yes
```

### アーカイブ解除

```bash
gh repo unarchive owner/repo
```

---

## 実践的なワークフロー

### 新規プロジェクト開始

```bash
# 1. リポジトリ作成
gh repo create my-project \
  --public \
  --description "My awesome project" \
  --add-readme \
  --gitignore Node \
  --license MIT \
  --clone

# 2. ディレクトリに移動
cd my-project

# 3. 開発開始
code .
```

### OSS 貢献ワークフロー

```bash
# 1. フォーク＆クローン
gh repo fork owner/oss-project --clone
cd oss-project

# 2. 上流を追跡
git remote -v

# 3. 最新を同期
gh repo sync --branch main

# 4. 機能ブランチ作成
git checkout -b fix/bug-123

# 5. 変更＆コミット
# ...

# 6. PR 作成
gh pr create
```

### リポジトリ管理

```bash
# 全リポジトリの一覧
gh repo list --limit 100 --json name,visibility,isArchived

# アーカイブすべき古いリポジトリを探す
gh repo list --json name,updatedAt,isArchived \
  --jq '[.[] | select(.isArchived == false)] | sort_by(.updatedAt) | .[:10]'
```

---

## 参考

- [gh repo 公式マニュアル](https://cli.github.com/manual/gh_repo)
