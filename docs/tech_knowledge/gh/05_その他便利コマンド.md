# gh その他便利コマンド

GitHub CLI のその他便利なコマンド（gist、release、search、api、alias、browse、status など）を解説します。

---

## 目次

- [gh gist - Gist 管理](#gh-gist---gist-管理)
- [gh release - リリース管理](#gh-release---リリース管理)
- [gh search - 検索](#gh-search---検索)
- [gh api - API 直接呼び出し](#gh-api---api-直接呼び出し)
- [gh alias - エイリアス設定](#gh-alias---エイリアス設定)
- [gh browse - ブラウザで開く](#gh-browse---ブラウザで開く)
- [gh status - ステータス確認](#gh-status---ステータス確認)
- [gh label - ラベル管理](#gh-label---ラベル管理)
- [gh secret/variable - シークレット/変数管理](#gh-secretvariable---シークレット変数管理)
- [gh extension - 拡張機能](#gh-extension---拡張機能)

---

## gh gist - Gist 管理

Gist（コードスニペット共有）の作成、表示、編集、削除を行います。

### gh gist create - 作成

```bash
# ファイルから Gist を作成
gh gist create script.py

# 複数ファイル
gh gist create file1.py file2.js file3.md

# 説明を追加
gh gist create script.py --desc "便利なスクリプト"

# パブリック Gist を作成
gh gist create script.py --public

# 標準入力から作成
echo "print('Hello')" | gh gist create --filename hello.py

# ファイル名を指定
gh gist create --filename config.json < settings.json

# 作成後にブラウザで開く
gh gist create script.py --web
```

### gh gist list - 一覧

```bash
# 自分の Gist 一覧
gh gist list

# パブリック Gist のみ
gh gist list --public

# シークレット Gist のみ
gh gist list --secret

# 表示件数を指定
gh gist list --limit 50
```

### gh gist view - 表示

```bash
# Gist を表示
gh gist view abc123def456

# ファイルを指定
gh gist view abc123def456 --filename script.py

# 生データを表示
gh gist view abc123def456 --raw

# ブラウザで開く
gh gist view abc123def456 --web
```

### gh gist edit - 編集

```bash
# エディタで編集
gh gist edit abc123def456

# ファイルを指定
gh gist edit abc123def456 --filename script.py

# 説明を更新
gh gist edit abc123def456 --desc "新しい説明"

# ファイルを追加
gh gist edit abc123def456 --add newfile.txt

# ファイルを削除
gh gist edit abc123def456 --remove oldfile.txt
```

### gh gist clone - クローン

```bash
# Gist をクローン
gh gist clone abc123def456

# ディレクトリを指定
gh gist clone abc123def456 my-gist
```

### gh gist delete - 削除

```bash
# Gist を削除
gh gist delete abc123def456

# 確認をスキップ
gh gist delete abc123def456 --yes
```

---

## gh release - リリース管理

GitHub Release の作成、表示、ダウンロードを行います。

### gh release create - 作成

```bash
# 対話形式で作成
gh release create v1.0.0

# タイトルと説明を指定
gh release create v1.0.0 --title "Version 1.0.0" --notes "Initial release"

# アセットをアップロード
gh release create v1.0.0 ./dist/app.zip ./dist/app.tar.gz

# ドラフトとして作成
gh release create v1.0.0 --draft

# プレリリースとして作成
gh release create v1.0.0 --prerelease

# ターゲットブランチを指定
gh release create v1.0.0 --target develop

# リリースノートを自動生成
gh release create v1.0.0 --generate-notes

# 前のタグからのリリースノート
gh release create v1.1.0 --notes-start-tag v1.0.0 --generate-notes

# ファイルからリリースノートを読み込み
gh release create v1.0.0 --notes-file ./RELEASE_NOTES.md

# latest としてマーク
gh release create v1.0.0 --latest

# ディスカッションカテゴリを指定
gh release create v1.0.0 --discussion-category "Announcements"
```

### gh release list - 一覧

```bash
# リリース一覧
gh release list

# 表示件数を指定
gh release list --limit 20

# ドラフトを除外
gh release list --exclude-drafts

# プレリリースを除外
gh release list --exclude-pre-releases
```

### gh release view - 表示

```bash
# 最新リリースを表示
gh release view

# タグを指定
gh release view v1.0.0

# ブラウザで開く
gh release view v1.0.0 --web

# JSON 形式で出力
gh release view v1.0.0 --json tagName,name,body,assets
```

### gh release download - ダウンロード

```bash
# 最新リリースのアセットをダウンロード
gh release download

# タグを指定
gh release download v1.0.0

# 特定のアセットのみ
gh release download v1.0.0 --pattern "*.zip"
gh release download v1.0.0 --pattern "app-*"

# ダウンロード先を指定
gh release download v1.0.0 --dir ./downloads

# ソースコードをダウンロード
gh release download v1.0.0 --archive=zip
gh release download v1.0.0 --archive=tar.gz

# チェックサムを検証
gh release download v1.0.0 --clobber
```

### gh release edit - 編集

```bash
# タイトルを変更
gh release edit v1.0.0 --title "New Title"

# リリースノートを更新
gh release edit v1.0.0 --notes "Updated notes"

# ドラフトを公開
gh release edit v1.0.0 --draft=false

# latest を変更
gh release edit v1.0.0 --latest

# プレリリースフラグを変更
gh release edit v1.0.0 --prerelease=false
```

### gh release delete - 削除

```bash
# リリースを削除
gh release delete v1.0.0

# タグも削除
gh release delete v1.0.0 --yes --cleanup-tag
```

### gh release upload - アセット追加

```bash
# アセットを追加
gh release upload v1.0.0 ./dist/new-asset.zip

# 既存アセットを上書き
gh release upload v1.0.0 ./dist/app.zip --clobber
```

---

## gh search - 検索

GitHub 全体を検索します。

### gh search repos - リポジトリ検索

```bash
# キーワードで検索
gh search repos "machine learning"

# 言語でフィルタ
gh search repos --language python "web framework"

# スター数でフィルタ
gh search repos --stars ">1000" react

# フォーク数でフィルタ
gh search repos --forks ">100" cli

# 最近作成されたもの
gh search repos --created ">2024-01-01" rust

# ライセンスでフィルタ
gh search repos --license MIT cli

# トピックでフィルタ
gh search repos --topic typescript --topic nodejs

# 表示件数
gh search repos --limit 50 react

# JSON 形式で出力
gh search repos --json fullName,description,url,stargazersCount react
```

### gh search issues - Issue 検索

```bash
# キーワードで検索
gh search issues "memory leak"

# 状態でフィルタ
gh search issues --state open "bug"

# ラベルでフィルタ
gh search issues --label "good first issue"

# リポジトリを指定
gh search issues --repo facebook/react "hooks"

# 担当者でフィルタ
gh search issues --assignee "@me"

# 作成者でフィルタ
gh search issues --author username

# 日付でフィルタ
gh search issues --created ">2024-01-01" --state open
```

### gh search prs - PR 検索

```bash
# キーワードで検索
gh search prs "fix typo"

# 状態でフィルタ
gh search prs --state merged "feature"

# レビュー状態でフィルタ
gh search prs --review approved

# ドラフトを除外
gh search prs --draft=false

# マージ済み
gh search prs --merged "performance"
```

### gh search code - コード検索

```bash
# コードを検索
gh search code "func main"

# 言語でフィルタ
gh search code --language go "http.HandleFunc"

# ファイル名でフィルタ
gh search code --filename "*.go" "context"

# リポジトリを指定
gh search code --repo owner/repo "TODO"

# パスでフィルタ
gh search code --path "src/" "import"
```

### gh search commits - コミット検索

```bash
# コミットを検索
gh search commits "fix bug"

# 作成者でフィルタ
gh search commits --author username "refactor"

# 日付でフィルタ
gh search commits --author-date ">2024-01-01"

# リポジトリを指定
gh search commits --repo owner/repo "update"
```

---

## gh api - API 直接呼び出し

GitHub REST/GraphQL API を直接呼び出します。

### REST API

```bash
# GET リクエスト
gh api repos/owner/repo

# ユーザー情報を取得
gh api user

# リポジトリ一覧を取得
gh api user/repos

# Issue を取得
gh api repos/owner/repo/issues

# パラメータを指定
gh api repos/owner/repo/issues --method GET -f state=open -f per_page=100

# POST リクエスト
gh api repos/owner/repo/issues --method POST \
  -f title="New Issue" \
  -f body="Issue body"

# PATCH リクエスト
gh api repos/owner/repo/issues/123 --method PATCH \
  -f state=closed

# DELETE リクエスト
gh api repos/owner/repo/issues/123/labels/bug --method DELETE

# ヘッダーを追加
gh api repos/owner/repo -H "Accept: application/vnd.github+json"

# JSON ファイルから入力
gh api repos/owner/repo/issues --method POST --input issue.json

# jq でフィルタ
gh api repos/owner/repo --jq '.stargazers_count'

# ページネーション
gh api repos/owner/repo/issues --paginate
```

### GraphQL API

```bash
# GraphQL クエリ
gh api graphql -f query='
  query {
    viewer {
      login
      name
    }
  }
'

# 変数を使用
gh api graphql -f query='
  query($owner: String!, $repo: String!) {
    repository(owner: $owner, name: $repo) {
      stargazerCount
      forkCount
    }
  }
' -f owner=owner -f repo=repo

# ファイルからクエリを読み込み
gh api graphql --input query.graphql

# jq でフィルタ
gh api graphql -f query='{ viewer { login } }' --jq '.data.viewer.login'
```

### 便利な API 例

```bash
# 自分のスター数合計
gh api user/repos --paginate --jq '[.[].stargazers_count] | add'

# Organization メンバー一覧
gh api orgs/my-org/members --jq '.[].login'

# リポジトリのコントリビューター
gh api repos/owner/repo/contributors --jq '.[].login'

# 今週のコミット数
gh api repos/owner/repo/stats/commit_activity --jq '.[-1].total'

# ブランチ保護ルール
gh api repos/owner/repo/branches/main/protection
```

---

## gh alias - エイリアス設定

よく使うコマンドにエイリアスを設定します。

### gh alias set - 設定

```bash
# シンプルなエイリアス
gh alias set co 'pr checkout'
gh alias set pv 'pr view'

# 引数付きエイリアス
gh alias set clone 'repo clone $1'

# 複雑なエイリアス
gh alias set sync 'repo sync --branch main'

# シェルコマンドを使用
gh alias set --shell prd 'gh pr list --state all | head -20'

# 複数コマンドを連鎖
gh alias set --shell prm 'gh pr merge --squash && git pull'
```

### gh alias list - 一覧

```bash
# エイリアス一覧を表示
gh alias list
```

### gh alias delete - 削除

```bash
# エイリアスを削除
gh alias delete co
```

### 便利なエイリアス例

```bash
# PR 関連
gh alias set prc 'pr create'
gh alias set prl 'pr list'
gh alias set prv 'pr view'
gh alias set prco 'pr checkout'
gh alias set prm 'pr merge --squash --delete-branch'

# Issue 関連
gh alias set ic 'issue create'
gh alias set il 'issue list'
gh alias set iv 'issue view'

# リポジトリ関連
gh alias set rc 'repo clone'
gh alias set rv 'repo view'

# ワークフロー関連
gh alias set wl 'workflow list'
gh alias set rl 'run list'
gh alias set rw 'run watch'

# 便利なカスタムエイリアス
gh alias set --shell mypr 'gh pr list --author "@me"'
gh alias set --shell review 'gh pr list --search "review-requested:@me"'
gh alias set --shell recent 'gh run list --limit 5'
```

---

## gh browse - ブラウザで開く

リポジトリやファイルをブラウザで開きます。

### 使用例

```bash
# リポジトリを開く
gh browse

# 特定のパスを開く
gh browse src/main.py

# 特定の行を開く
gh browse src/main.py:42

# 行範囲を指定
gh browse src/main.py:10-20

# 設定ページを開く
gh browse --settings

# Issue ページを開く
gh browse --issues

# PR ページを開く
gh browse --pulls

# Actions ページを開く
gh browse --actions

# Projects ページを開く
gh browse --projects

# Wiki ページを開く
gh browse --wiki

# ブランチを指定
gh browse --branch develop

# コミットを指定
gh browse --commit abc1234

# URL のみ表示（ブラウザを開かない）
gh browse --no-browser

# 別リポジトリを開く
gh browse --repo owner/repo
```

---

## gh status - ステータス確認

GitHub 全体での自分に関連するアクティビティを確認します。

### 使用例

```bash
# 全体ステータスを表示
gh status

# Organization でフィルタ
gh status --org my-org

# 除外する Organization
gh status --exclude my-private-org
```

### 出力内容

- 割り当てられた Issue
- 割り当てられた PR
- レビューリクエストされた PR
- メンションされた Issue/PR
- リポジトリのアクティビティ

---

## gh label - ラベル管理

リポジトリのラベルを管理します。

### gh label create - 作成

```bash
# ラベルを作成
gh label create "priority:high"

# 説明と色を指定
gh label create "bug" --description "Something isn't working" --color FF0000

# 既存ラベルを上書き
gh label create "bug" --color 00FF00 --force
```

### gh label list - 一覧

```bash
# ラベル一覧
gh label list

# JSON 形式で出力
gh label list --json name,description,color

# 検索
gh label list --search "priority"
```

### gh label edit - 編集

```bash
# 名前を変更
gh label edit "bug" --name "bug-report"

# 色を変更
gh label edit "bug" --color 0000FF

# 説明を変更
gh label edit "bug" --description "New description"
```

### gh label delete - 削除

```bash
# ラベルを削除
gh label delete "old-label"

# 確認をスキップ
gh label delete "old-label" --yes
```

### gh label clone - クローン

```bash
# 別リポジトリからラベルをコピー
gh label clone owner/source-repo

# 上書き
gh label clone owner/source-repo --force
```

---

## gh secret/variable - シークレット/変数管理

GitHub Actions のシークレットと変数を管理します。

### gh secret

```bash
# シークレット一覧
gh secret list

# シークレットを設定
gh secret set API_KEY

# 値を直接指定
gh secret set API_KEY --body "secret-value"

# ファイルから設定
gh secret set SSH_KEY < ~/.ssh/id_rsa

# 環境用シークレット
gh secret set API_KEY --env production

# Organization シークレット
gh secret set API_KEY --org my-org

# シークレットを削除
gh secret delete API_KEY
```

### gh variable

```bash
# 変数一覧
gh variable list

# 変数を設定
gh variable set NODE_VERSION --body "18"

# 環境用変数
gh variable set API_URL --env staging --body "https://staging.example.com"

# 変数を削除
gh variable delete NODE_VERSION
```

---

## gh extension - 拡張機能

GitHub CLI の拡張機能を管理します。

### 拡張機能のインストール

```bash
# 拡張機能をインストール
gh extension install owner/gh-extension-name

# 例: gh-dash（ダッシュボード）
gh extension install dlvhdr/gh-dash

# 例: gh-copilot（Copilot CLI）
gh extension install github/gh-copilot
```

### 拡張機能の管理

```bash
# インストール済み拡張機能一覧
gh extension list

# 拡張機能を更新
gh extension upgrade gh-dash
gh extension upgrade --all

# 拡張機能を削除
gh extension remove gh-dash

# 拡張機能を検索
gh extension search dash
```

### おすすめ拡張機能

| 拡張機能 | 説明 |
|---------|------|
| `dlvhdr/gh-dash` | ターミナルダッシュボード |
| `github/gh-copilot` | Copilot CLI |
| `vilmibm/gh-screensaver` | スクリーンセーバー |
| `meiji163/gh-notify` | 通知管理 |
| `seachicken/gh-poi` | PR/Issue を検索 |

---

## 実践的なスクリプト例

### デイリーレポート

```bash
#!/bin/bash
# 今日のアクティビティをまとめる

echo "=== 今日のアクティビティ ==="
echo ""

echo "## 自分の PR"
gh pr list --author "@me" --state all --search "updated:>$(date +%Y-%m-%d)"
echo ""

echo "## レビュー待ち"
gh pr list --search "review-requested:@me is:open"
echo ""

echo "## 自分の Issue"
gh issue list --author "@me" --state all --search "updated:>$(date +%Y-%m-%d)"
echo ""

echo "## 最近の CI 実行"
gh run list --limit 5
```

### リリース自動化

```bash
#!/bin/bash
# セマンティックバージョニングでリリース

VERSION=$1

if [ -z "$VERSION" ]; then
  echo "Usage: $0 <version>"
  exit 1
fi

# タグを作成
git tag -a "v$VERSION" -m "Release v$VERSION"
git push origin "v$VERSION"

# リリースを作成
gh release create "v$VERSION" \
  --title "Release v$VERSION" \
  --generate-notes \
  ./dist/*

echo "Released v$VERSION!"
```

### 一括ラベル設定

```bash
#!/bin/bash
# 標準ラベルセットを設定

LABELS=(
  "bug:FF0000:Something isn't working"
  "enhancement:00FF00:New feature or request"
  "documentation:0000FF:Improvements or additions to documentation"
  "good first issue:7057FF:Good for newcomers"
  "help wanted:008672:Extra attention is needed"
  "priority:high:FF6600:High priority"
  "priority:low:FFFF00:Low priority"
)

for label in "${LABELS[@]}"; do
  IFS=':' read -r name color desc <<< "$label"
  gh label create "$name" --color "$color" --description "$desc" --force
done

echo "Labels configured!"
```

---

## 参考

- [gh gist 公式マニュアル](https://cli.github.com/manual/gh_gist)
- [gh release 公式マニュアル](https://cli.github.com/manual/gh_release)
- [gh search 公式マニュアル](https://cli.github.com/manual/gh_search)
- [gh api 公式マニュアル](https://cli.github.com/manual/gh_api)
- [gh alias 公式マニュアル](https://cli.github.com/manual/gh_alias)
- [GitHub CLI Extensions](https://github.com/topics/gh-extension)
