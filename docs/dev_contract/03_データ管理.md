# 03. データ管理

## 概要

本規約は、データファイルの配置ルールとGit管理方針を定める。
データの種類に応じて適切な場所に配置し、Git管理の対象・対象外を明確にする。

---

## データの種類と配置

### フォルダ構造

```
data/
├── original_sources/       # 元データ（一次データ）
│   ├── llm/               # LLM関連
│   │   ├── pdf/
│   │   ├── text_documents/
│   │   └── image/
│   └── ml/                # 機械学習関連
│       ├── iris/
│       ├── diabetes/
│       └── image/
├── outputs/               # 二次データ（処理済みデータ）
│   └── ml/
│       └── image/
└── tmp/                   # 一時データ
```

---

## 元データ（original_sources）

### 配置ルール

- 元データは `data/original_sources/` に配置する
- どのサービス・機能から使われるかが分かるフォルダ構成にする
- データの出所が分かるようにREADMEなどで記録する

### 例

```
data/original_sources/
├── README.md              # データの出所・説明
├── llm/
│   └── pdf/
│       ├── document1.pdf
│       └── document2.pdf
└── ml/
    └── iris/
        └── iris.csv
```

---

## 二次データ（outputs）

### 配置ルール

- 元データから生成される二次データは `data/outputs/` に配置する
- 出力ファイルの用途・生成元が分かるパス構造にする
- 再生成可能なデータは原則としてGit管理に含めない

### 例

```
data/outputs/
├── ml/
│   └── image/
│       ├── processed_images/    # 前処理済み画像
│       └── predictions/         # 推論結果
└── llm/
    └── embeddings/              # 埋め込みベクトル
```

---

## 一時データ（tmp）

### 配置ルール

- 再利用を想定しない一時的なデータは `tmp/` に配置する
- `tmp/` フォルダはGit管理に含めない
- 定期的にクリーンアップする

### 用途例

- デバッグ用の出力ファイル
- 一時的なキャッシュ
- 実験途中の中間ファイル

---

## Git管理ルール

### データのGit管理方針

| データ種別 | Git管理 | 理由 |
|-----------|--------|------|
| 元データ（小容量） | ⭕ 含める | 他のメンバーと共有するため |
| 元データ（大容量） | ❌ 含めない | リポジトリ肥大化を防ぐ |
| 学習済みモデル | ❌ 含めない | ファイルサイズが大きい |
| 二次データ（一般） | ❌ 含めない | 再生成可能なため |
| 二次データ（共有用） | ⭕ 含める | 再生成に時間がかかる場合など |
| 一時データ | ❌ 含めない | 一時的なもののため |

### 大容量ファイルの目安

- 単一ファイル: 10MB以上は要検討
- 学習済みモデル: 原則としてGit管理外
- 大量の画像ファイル: Git管理外、必要ならGit LFSを検討

### .gitignoreの設定

```gitignore
# データ関連
data/outputs/
data/tmp/
tmp/

# 学習済みモデル
*.pt
*.pth
*.h5
*.pkl
*.joblib

# 大容量ファイル
*.bin
*.onnx
```

### 大容量データの共有方法

Git管理に含めない大容量データは、以下の方法で共有する：

1. **クラウドストレージ**: Google Drive, S3など
2. **Git LFS**: 大容量ファイル専用の仕組み
3. **DVC**: データバージョン管理ツール

READMEにダウンロード方法を記載すること。

---